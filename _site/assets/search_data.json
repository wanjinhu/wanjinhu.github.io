

[
  
  
    {
      "title"    : "é¡µé¢æ²¡æœ‰æ‰¾åˆ°",
      "url"      : "http://localhost:4000/404.html",
      "keywords" : "404"
    } ,
  
  
  
    {
      "title"    : "About",
      "url"      : "http://localhost:4000/about/",
      "keywords" : "Wanjin Hu, èƒ¡ä¸‡é‡‘"
    } ,
  
  
  
    {
      "title"    : "å½’æ¡£",
      "url"      : "http://localhost:4000/archives/",
      "keywords" : "å½’æ¡£"
    } ,
  
  
  
    {
      "title"    : "Categories",
      "url"      : "http://localhost:4000/categories/",
      "keywords" : "åˆ†ç±»"
    } ,
  
  
  
    {
      "title"    : "æåŠ© / Donate",
      "url"      : "http://localhost:4000/donate/",
      "keywords" : "Donate"
    } ,
  
  
  
    {
      "title"    : "Fragments",
      "url"      : "http://localhost:4000/fragments/",
      "keywords" : "fragments"
    } ,
  
  
  
  
  
    {
      "title"    : "Links",
      "url"      : "http://localhost:4000/links/",
      "keywords" : "å‹æƒ…é“¾æ¥"
    } ,
  
  
  
    {
      "title"    : "mindmap",
      "url"      : "http://localhost:4000/mindmap-viewer/",
      "keywords" : "mindmap"
    } ,
  
  
  
    {
      "title"    : "Open Source Projects",
      "url"      : "http://localhost:4000/open-source/",
      "keywords" : "å¼€æº,open-source,GitHub,å¼€æºé¡¹ç›®"
    } ,
  
  
  
  
  
    {
      "title"    : "Wiki",
      "url"      : "http://localhost:4000/wiki/",
      "keywords" : "ç»´åŸº, Wiki"
    } ,
  
  
  
  
  
  
  
  
  
  

  
    {
      "title"    : "è§£å†³ Groovy å¼•èµ·çš„ä¸€æ¬¡ OOM å‘Šè­¦",
      "category" : "Java",
      "content": "çº¿ä¸Šæ”¶åˆ°å‘Šè­¦ï¼Œæœ‰ä¸ªæœåŠ¡çš„ä¸€ä¸ª pod was OOM killed. é—®é¢˜åˆ†æ ä»ç›‘æ§ç³»ç»Ÿæ¥çœ‹ï¼Œè¢« kill çš„èŠ‚ç‚¹ A åœ¨é‡å¯å‰ï¼Œå †å†…å­˜ä½¿ç”¨éšç€ YoungGC è§„å¾‹æ³¢åŠ¨ï¼Œå…ƒç©ºé—´å ç”¨è¾ƒé«˜ï¼Œä¸”ä¸€ç›´ç¼“æ…¢å¢é•¿åˆ°äº†400MBä»¥ä¸Šâ€”â€”è¯¥åº”ç”¨ä»£ç é‡ä¸å¤§ï¼ŒæŒ‰ç†ä¸åº”è¯¥å ç”¨è¿™ä¹ˆå¤šã€‚ è€Œä¸å®ƒåŒå®¹å™¨ç»„çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ B çœ‹èµ·æ¥æ›´ä¸æ­£å¸¸ï¼Œå¹³å‡å“åº”æ—¶é—´æ˜æ˜¾é•¿äºå¦å¤–çš„èŠ‚ç‚¹ï¼Œä¸”åœ¨å †å†…å­˜å·²ç»é™ä¸‹æ¥çš„æƒ…å†µä¸‹è¿˜å¤šæ¬¡ FullGCï¼Œå¹¶ä¸”æœ‰å¾ˆå¤š java.lang.OutOfMemoryErrorã€‚æ™šäº›æ—¶å€™è¯¥èŠ‚ç‚¹è§¦å‘äº†ä¸¤æ¬¡ FullGC æ¬¡æ•°è¿‡å¤šçš„å‘Šè­¦ã€‚ OutOfMemoryError å¼‚å¸¸å †æ ˆï¼š java.lang.OutOfMemoryError : Metaspace  at java.lang.ClassLoader.defineClass1(Native Method)  at java.lang.ClassLoader.defineClass(ClassLoader.java:763)  at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)  at groovy.lang.GroovyClassLoader.access$400(GroovyClassLoader.java:62)  at groovy.lang.GroovyClassLoader$ClassCollector.createClass(GroovyClassLoader.java:500)  at groovy.lang.GroovyClassLoader$ClassCollector.onClassNode(GroovyClassLoader.java:517)  at groovy.lang.GroovyClassLoader$ClassCollector.call(GroovyClassLoader.java:521)  at org.codehaus.groovy.control.CompilationUnit$16.call(CompilationUnit.java:822)  at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:1053)  at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:591)  at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:569)  at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:546)  at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:298)  at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:268)  at groovy.lang.GroovyShell.parseClass(GroovyShell.java:688)  at groovy.lang.GroovyShell.parse(GroovyShell.java:700)  at groovy.lang.GroovyShell.evaluate(GroovyShell.java:584)  at groovy.lang.GroovyShell.evaluate(GroovyShell.java:623)  at groovy.lang.GroovyShell.evaluate(GroovyShell.java:594)  at org.springframework.scripting.groovy.GroovyScriptEvaluator.evaluate(GroovyScriptEvaluator.java:118) ç»“åˆä»¥ä¸Šå¼‚å¸¸å †æ ˆä¸èŠ‚ç‚¹ B çš„ç°è±¡æ¨æµ‹ï¼š  æ‰§è¡Œ GroovyScriptEvaluator.evaluate æ—¶ï¼Œä¼šåŠ¨æ€ç”Ÿæˆä¸€äº› Classï¼Œå¯¼è‡´å…ƒç©ºé—´å ç”¨æŒç»­ä¸Šå‡ï¼› FullGC ä¸»è¦ä¸æ˜¯ä¸ºäº†å›æ”¶å †å†…å­˜ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸ºäº†å›æ”¶å…ƒç©ºé—´ï¼› FullGC ä¹Ÿæ— æ³•æˆåŠŸå›æ”¶ 1 ä¸­åŠ¨æ€ç”Ÿæˆçš„ Class å ç”¨çš„å…ƒç©ºé—´ã€‚ æ ¹æ®æ¨æµ‹ï¼Œç”¨ Groovy å’Œ Metaspace ä½œä¸ºå…³é”®å­—è¿›è¡Œäº†ä¸€äº›æœç´¢ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä¸€ç¯‡ç›¸å…³æ€§æ¯”è¾ƒé«˜çš„æ–‡ç« ï¼šè®°ä¸€æ¬¡çº¿ä¸ŠGroovyå¯¼è‡´çš„OOMçš„é—®é¢˜è§£å†³è¿‡ç¨‹ ä»¥åŠå®ƒé‡Œé¢å¼•ç”¨çš„æ–‡ç« ï¼š Groovy åŠ¨æ€åŠ è½½ç±»è¸©ä¸­çš„é‚£äº›å‘ é‡Œé¢æåˆ°äº† Groovy çš„ä¸€ä¸ª Bugï¼š ClassInfo.globalClassValue lead to GroovyClassLoader canâ€™t unload classesï¼Œå¤§æ„æ˜¯ Groovy åŠ¨æ€ç”Ÿæˆçš„ç±»å› ä¸ºè¢«ç¼“å­˜å’Œå¼•ç”¨ï¼Œå¯¼è‡´æ— æ³• unloadï¼Œä»è€Œå¼•å‘å…ƒç©ºé—´éšç€æ—¶é—´æ¨ç§»ä¸€ç›´å¢é•¿ä¸”æ— æ³•é‡Šæ”¾ã€‚åœ¨ Groovy 2.4.6 å¼•å…¥ï¼Œ2.4.8 ä¿®å¤ã€‚ æ£€æŸ¥æˆ‘ä»¬é¡¹ç›®é‡Œçš„ groovy-all åŒ…ç‰ˆæœ¬ï¼Œæ˜¯ 2.4.7ï¼Œé‚£å¾ˆæœ‰å¯èƒ½å‘½ä¸­è¿™ä¸ª bugã€‚ æœ¬åœ°éªŒè¯ æ„å»ºä¸€ä¸ªæµ‹è¯•åº”ç”¨ï¼Œå¯åŠ¨åå¾ªç¯è°ƒç”¨ GroovyScriptEvaluator.evaluateï¼Œå¦‚ï¼š @SpringBootApplication public class GroovyOomDemoApplication implements CommandLineRunner { public static void main(String[] args) {  SpringApplication.run(GroovyOomDemoApplication.class, args);  } @Override  public void run(String... args) throws Exception {  GroovyScriptEvaluator evaluator = new GroovyScriptEvaluator();  ScriptSource scriptSource = new StaticScriptSource(a == 3);  Map&lt;String, Object&gt; params = new HashMap&lt;&gt;(0);  Random rand = new Random();  while (true) {   Integer a = rand.nextInt(10);   params.put(a, a);   Object result = evaluator.evaluate(scriptSource, params);   System.out.printf(a = %d, result is %s%n, a, result);  }  } } ç„¶ååœ¨è¿è¡Œçš„ JVM å‚æ•°é‡Œæ·»åŠ ä¸€äº›å‚æ•°ï¼š -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=64m -verbose:class -verbose:gc è®¾ç½®æœ€å¤§å…ƒç©ºé—´å¤§å°ã€æ‰“å°ç±»çš„ load/unloadã€ä»¥åŠ GC çš„ä¿¡æ¯ã€‚ æµ‹è¯•ä»£ç å‘å¸ƒåœ¨ https://github.com/mzlogin/groovy-oom-demo ä½¿ç”¨ groovy-all 2.4.7 ç‰ˆæœ¬è¿è¡Œçš„æƒ…å†µ æ§åˆ¶å°æ‰“å°ï¼š â€¦â€¦ [Loaded Script1 from file:/groovy/shell] a = 1, result is false [Loaded Script1 from file:/groovy/shell] a = 2, result is false [Loaded Script1 from file:/groovy/shell] a = 0, result is false [Loaded Script1 from file:/groovy/shell] a = 8, result is false [GC (Metadata GC Threshold) 838057K-&gt;253201K(1080832K), 0.1350074 secs] [Full GC (Metadata GC Threshold) 253201K-&gt;244956K(1232896K), 0.4860932 secs] [GC (Last ditch collection) 244956K-&gt;245557K(1421824K), 0.0403506 secs] â€¦â€¦ Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread main â€¦â€¦ Profilerï¼š ä»æ§åˆ¶å°æ‰“å°ä»¥åŠ Profiler æ¥çœ‹ï¼Œç¨‹åºå…ˆæ˜¯æ‰“å°äº†å¾ˆå¤š [Loaded Script1 from file:/groovy/shell]ï¼Œç„¶åæœ€åå½“ Non-Heap Memory å ç”¨å¾ˆé«˜ä¹‹åï¼Œå¼€å§‹å› ä¸ºè¾¾åˆ° Metadata GC Thresholdï¼Œç–¯ç‹‚ YongGC + FullGCï¼Œä½† Non-Heap Memory ä¹Ÿé™ä¸ä¸‹æ¥ï¼Œæœ€ç»ˆç¨‹åºå¾ˆå¿«ç›´æ¥æŒ‚æ‰äº†ã€‚ å‡çº§ä¸º groovy-all 2.4.8 ç‰ˆæœ¬è¿è¡Œçš„æƒ…å†µ æ§åˆ¶å°æ‰“å°ï¼š â€¦â€¦ [Loaded Script1 from file:/groovy/shell] a = 9, result is false [Loaded Script1 from file:/groovy/shell] a = 3, result is true [Loaded Script1 from file:/groovy/shell] a = 7, result is false [Loaded Script1 from file:/groovy/shell] a = 7, result is false [GC (Metadata GC Threshold) 722452K-&gt;251702K(1090560K), 0.0483118 secs] [Full GC (Metadata GC Threshold) 251702K-&gt;240778K(1254912K), 0.4303570 secs] [GC (Last ditch collection) 240778K-&gt;241270K(1373696K), 0.0274501 secs] [Full GC (Last ditch collection) [Unloading class Script1 0x00000007c103c428] [Unloading class Script1 0x00000007c103bc28] [Unloading class Script1 0x00000007c103b428] [Unloading class Script1 0x00000007c103ac28] [Unloading class Script1 0x00000007c103a428] â€¦â€¦ Profilerï¼š åŒä¸Šé¢ä¸€æ ·ï¼Œç¨‹åºå¼€å§‹ä¹Ÿæ˜¯æ‰“å°äº†å¾ˆå¤š [Loaded Script1 from file:/groovy/shell]ï¼Œä½†ä¸åŒçš„æ˜¯è¾¾åˆ° Metadata GC Threshold è¿›è¡Œ GC ä¹‹åï¼Œå¯ä»¥å°† Non-Heap Memory å ç”¨é™ä¸‹æ¥ï¼Œå¹¶ä¸”ä»æ§åˆ¶å°å¯ä»¥çœ‹åˆ°åœ¨ GC æ—¶æ‰“å°äº†å¾ˆå¤š [Unloading class Script1 xxx]ï¼Œç¨‹åºæŒç»­è¿è¡Œå¾ˆé•¿æ—¶é—´ä¹Ÿæ²¡é—®é¢˜ã€‚ å¦å¤–æœ‰ä¸ªç–‘é—®ï¼šè¿™ä¸ªåº”ç”¨ä¸Šçº¿å¾ˆé•¿æ—¶é—´äº†ï¼Œä¸ Groovy ç›¸å…³çš„é€»è¾‘å¾ˆä¹…æ²¡æœ‰åŠ¨è¿‡äº†ï¼Œä¸ºä»€ä¹ˆä»¥å‰æ²¡æœ‰å‡ºç°è¿™ç§ç°è±¡ï¼Ÿ ç­”æ¡ˆï¼šä»¥å‰è¿™ä¸ªåº”ç”¨æ—¶ä¸æ—¶ä¼šå‘ä¸€æ¬¡ç‰ˆï¼Œé‡ç½® Metaspaceï¼Œè€Œè¿™æ¬¡æœ‰ä¸¤ä¸ªå¤šæœˆæ²¡æœ‰å‘ç‰ˆäº†ï¼ŒMetaspace ä¸€ç›´å¢é•¿ï¼Œæœ€ç»ˆè¾¾åˆ°äº†é˜ˆå€¼ã€‚ è§£å†³æ–¹æ³• å‡çº§ groovy-all è‡³ 2.4.8ï¼ˆå«ï¼‰ç‰ˆæœ¬ä»¥ä¸Šã€‚ å‚è€ƒ  è®°ä¸€æ¬¡çº¿ä¸ŠGroovyå¯¼è‡´çš„OOMçš„é—®é¢˜è§£å†³è¿‡ç¨‹ Groovy åŠ¨æ€åŠ è½½ç±»è¸©ä¸­çš„é‚£äº›å‘ ClassInfo.globalClassValue lead to GroovyClassLoader canâ€™t unload classes ",
      "url"      : "http://localhost:4000/2023/03/22/oom-caused-by-groovy/",
      "keywords" : "Groovy, OutOfMemoryError, OOM, Java, ç³»ç»Ÿç¨³å®šæ€§"
    } ,
  
    {
      "title"    : "å®åŸºå› ç»„åˆ†ææµç¨‹",
      "category" : "Metagenomic",
      "content": "æä¾›ä¸€ä¸ªå®åŸºå› ç»„åˆ†ææµç¨‹ã€‚ Here is a metagenomic sequence data analysis pipeline, nothing different with other pipelines. But if you want to get to know the metagenomic analysis pipeline step by step, maybe you can get some details from this repository. And it is suitable for the beginners i think. Scripts and test files you can find here: Metagenomic-Analysis-Pipeline Pipeline overview ğŸ« Raw sequence quality trim Host reference sequence remove Metaphlan for composition of microbial communities Sequence assembly Gene prediction Remove redundancy gene and build non-redundant geneset Function annotation using emapper Organize function results table Quick start ğŸ¦ $python pipe_metagenome.py -h usage: ================================================================= python pipe_metagenome.py  t--fastq_list fq.list  t--output_dir result  t--ref ref_bowtie2_index ref_bowtie2_index: canis: /root/database/Canis_GCF_000002285.5/Canis_GCF_000002285_5 human: /root/database/hg38_GCF_000001405.40/GCF_000001405.40/hg38 ================================================================= Pipeline of metagenome optional arguments: -h, --help  show this help message and exit -l FQLIST, --fastq_list FQLIST     raw fq list -o OUTDIR, --output_dir OUTDIR     result output -r REF, --ref REF  ref genome bowtie2 index What you need to do is to provide two input files: â€“fastq_list # sample - fq_R1 - fq_R2 list, format like fq.list â€“ref # host reference genome bowtie2 index And set output dir --output_dir, all of output results would be included. Output files explanation ğŸŠ Output files tree (not show all files) â”œâ”€â”€ 00-result     # most important results in this fold â”‚Â Â  â”œâ”€â”€ 00_merged_abundance_table.txt # composition of microbial communities â”‚Â Â  â”œâ”€â”€ 01_metaphlan_phylum.txt  # communities in phylum level â”‚Â Â  â”œâ”€â”€ 02_metaphlan_class.txt  # communities in class level â”‚Â Â  â”œâ”€â”€ 03_metaphlan_order.txt  # communities in order level â”‚Â Â  â”œâ”€â”€ 04_metaphlan_family.txt  # communities in family level â”‚Â Â  â”œâ”€â”€ 05_metaphlan_genus.txt  # communities in genus level â”‚Â Â  â”œâ”€â”€ 06_metaphlan_species.txt  # communities in species level â”‚Â Â  â”œâ”€â”€ KO_samples.xls   # KEGG KO gene composition table â”‚Â Â  â””â”€â”€ pathway_samples.xls   # KEGG pathway composition table â”œâ”€â”€ 01-fastp_trim â”œâ”€â”€ 02-ref_remove â”œâ”€â”€ 03-metaphlan â”œâ”€â”€ 04-megahit â”œâ”€â”€ 05-prodigal â”œâ”€â”€ 06-cdhit â”œâ”€â”€ 07-emapper â”œâ”€â”€ 08-sam_count â”œâ”€â”€ 09-emapper_kegg Output important result files explanation metaphlan_diff-levels.txt column 1 : communities information column 2 ~ : communities abundance percent of samples  clade_name tC1 k__Bacteria;p__Firmicutes t86.51132 k__Bacteria;p__Actinobacteria t6.52203 k__Bacteria;p__Bacteroidetes t4.24729 k__Bacteria;p__Proteobacteria t1.96422 k__Bacteria;p__Fusobacteria t0.75514 k__Bacteria;p__Tenericutes t0.0 k__Bacteria;p__Spirochaetes t0.0 k__Bacteria;p__Verrucomicrobia t0.0 ...  KO_samples.xls column 1 : KO gene name column 2 : KO gene description column 3 : KO gene id column 4 ~ : KO gene number of samples  KO_name tKO_des tKO tC1 E1.1.1.1, adh talcohol dehydrogenase [EC:1.1.1.1] tK00001 t2817.0 AKR1A1, adh talcohol dehydrogenase (NADP+) [EC:1.1.1.2] tK00002 t254.0 hom thomoserine dehydrogenase [EC:1.1.1.3] tK00003 t2890.0 BDH, butB t(R,R)-butanediol dehydrogenase / meso-butanediol dehydrogenase / diacetyl reductase [EC:1.1.1.4 1.1.1.- 1.1.1.303] tK00004 t20.0 ...  pathway_samples.xls column 1 : pathway level 1 column 2 : pathway level 2 column 3 : pathway level 3 column 4 : pathway id column 5 ~ : pathway gene number of samples  level1 tlevel2 tlevel3 tpathway tC1 Metabolism tCarbohydrate metabolism tGlycolysis / Gluconeogenesis tko00010 t91005.0 Metabolism tCarbohydrate metabolism tCitrate cycle (TCA cycle) tko00020 t31442.0 Metabolism tCarbohydrate metabolism tPentose phosphate pathway tko00030 t53905.0 Metabolism tCarbohydrate metabolism tPentose and glucuronate interconversions tko00040 t21334.0 ...   Step by step ğŸ¦¥ Step1 Raw sequence quality trim using fastp fastp -i sample_1.fastq.gz     -o sample_clean.1.fastq.gz     -I sample_2.fastq.gz     -O sample_clean.2.fastq.gz     -w 8 -h sample.html -j sample.json Step2 Host reference sequence remove bowtie2 -x ref_bowtie2_index -1 sample_clean.1.fastq.gz -2 sample_clean.2.fastq.gz -S sample.sam 2&gt;sample.mapping.log samtools fastq -@ 8 -f 4 sample.sam -1 sample.unmap.1.fastq.gz -2 sample.unmap.2.fastq.gz -s sample.unmap.single.fastq.gz Step3 Metaphlan for composition of microbial communities zcat sample.unmap.1.fastq.gz sample.unmap.2.fastq.gz|metaphlan --input_type fastq --bowtie2out sample_bowtie2.bz2 --output_file sample_metaphlan.tsv --nproc 8 # when you install metaphlan in the system, you will get script 'merge_metaphlan_tables.py', that's for merge different samples metaphlan result in one file, like: merge_metaphlan_tables.py *.tsv &gt; 00_merged_abundance_table.txt grep -E '(p__)|(clade_name)' 00_merged_abundance_table.txt |grep -v 'c__'|sed 's/|/;/g' &gt; 01_metaphlan_phylum.txt grep -E '(c__)|(clade_name)' 00_merged_abundance_table.txt |grep -v 'o__'|sed 's/|/;/g' &gt; 02_metaphlan_class.txt grep -E '(o__)|(clade_name)' 00_merged_abundance_table.txt |grep -v 'f__'|sed 's/|/;/g' &gt; 03_metaphlan_order.txt grep -E '(f__)|(clade_name)' 00_merged_abundance_table.txt |grep -v 'g__'|sed 's/|/;/g' &gt; 04_metaphlan_family.txt grep -E '(g__)|(clade_name)' 00_merged_abundance_table.txt |grep -v 's__'|sed 's/|/;/g' &gt; 05_metaphlan_genus.txt grep -E '(s__)|(clade_name)' 00_merged_abundance_table.txt |grep -v 't__'|sed 's/|/;/g' &gt; 06_metaphlan_species.txt Step4 Sequence assembly and trim contigs which length &lt; 500bp megahit -1 sample.unmap.1.fastq.gz -2 sample.unmap.2.fastq.gz -o sample_megahit --out-prefix sample -t 8 seqkit seq -m 500 sample_megahit/sample.contigs.fa --remove-gaps &gt; sample.contigs_500.fa sed -i 's/&gt;/&gt;sample_/g' sample.contigs_500.fa Step5 Gene prediction using prodigal prodigal -p meta -a sample_prot.faa -m -d sample_nucl.fna -o sample_genes.gff -f gff -s sample.stat -i sample.contigs_500.fa Step6 Remove redundancy gene and build non-redundant geneset cat sample1_prot.faa sample2_prot.faa ... &gt; prot.faa cat sample1_nucl.fna sample2_nucl.fna ... &gt; nucl.fna cd-hit -i prot.faa -o prot_nonerude.faa -c 0.95 -T 8 -n 5 -d 0 -aS 0.9 -g 1 -sc 1 -sf 1 -M 0 grep '&gt;' prot_nonerude.faa|awk -F ' ' '{print $1}'|sed 's/&gt;//g' &gt; prot_nonerude.list seqtk subseq nucl.fna prot_nonerude.list &gt; nucl_nonerude.fna bwa index nucl_nonerude.fna -p geneset_bwa bioawk -c fastx '{print $name, length($seq)}' nucl_nonerude.fna &gt; geneset_length.txt Step7 Function annotation using emapper # when you install emapper in the system, you will get script 'emapper.py' emapper.py -i prot_nonerude.faa -o eggnog --cpu 0 --usemem cut -f1,12 eggnog.emapper.annotations|grep -v ^#|sed 's/ko://g'|sed '1i gene  tko'|grep -v - &gt; KEGG_KO.txt cut -f1,13 eggnog.emapper.annotations|grep -v ^#|sed '1i gene  tpathway'|grep -v - &gt; KEGG_PATHWAY.txt Step8 Gene num count bwa mem -t 4 geneset_bwa sample.unmap.1.fastq.gz sample.unmap.2.fastq.gz | samtools view -bS - | samtools sort - &gt; sample_mapping_geneset.bam samtools view -F 4 -F 256 -F 2048 sample_mapping_geneset.bam|awk '{if($3!=*) print $3}'|sort| uniq -c|awk 'BEGIN {FS= ;OFS=,} {print $2,$1}' | awk 'BEGIN {FS=,;OFS=,} {if ($2 &gt; 1) print $1  t$2; else print $1  t0}'|sed '1i gene  tsample' &gt; sample.count Step9 Organize function results table # using /kegg/kegg.py to analysis, like: $python kegg.py -h usage: python kegg.py -kk KEGG_KO.txt -kp KEGG_PATHWAY.txt -mt merged_file.txt -ok out_KO.xls -op out_pathway.xls Merge KO/pathway count table from eggnog result. optional arguments: -h, --help  show this help message and exit -kk KEGGKO, --kegg_KO KEGGKO     Sample's kegg KO information, such as KEGG_KO.txt -kp KEGGPATHWAY, --kegg_pathway KEGGPATHWAY     Sample's kegg pathway information, such as     KEGG_PATHWAY.txt -mt MERGETABLE, --merge_table MERGETABLE     Sample's merged gene count table, such as     merged_file.txt -ok OUTKO, --out_KO OUTKO     Output KO result, such as out_KO.xls -op OUTPATHWAY, --out_pathway OUTPATHWAY     Output pathway result, such as out_pathway.xls -t TMP, --tmp TMP  Tmp files dir Contact ğŸ– Wanjin Hu (wanjin.hu@outlook.com) ",
      "url"      : "http://localhost:4000/2023/08/10/pipeline-metagenomic-analysis/",
      "keywords" : "Metagenomic, Microbiome"
    } ,
  
    {
      "title"    : "GitHub",
      "category" : "",
      "content": "æ‰“å¼€/ä¸‹è½½æ–‡ä»¶åŠ é€Ÿ  é¡¹ç›®å†…çš„æ–‡ä»¶ æ¯”å¦‚è¦ä¸‹è½½ https://github.com/junegunn/vim-plug/plug.vimï¼Œé‚£å¯ä»¥å°† github.com æ›¿æ¢æˆ fastly.jsdelivr.net/ghï¼Œæœ€ç»ˆåœ°å€ https://fastly.jsdelivr.net/gh/junegunn/vim-plug/plug.vim å‚è€ƒ https://mazhuang.org/2020/05/01/cdn-for-github-pages/   Releases é‡Œçš„æ–‡ä»¶ æ¯”å¦‚è¦ä¸‹è½½ https://github.com/PowerShell/PowerShell/releases/download/v7.1.0-preview.6/PowerShell-7.1.0-preview.6-win-x64.zipï¼Œå¯ä»¥å°†å®ƒå¡«åˆ° https://d.serctl.com/ ä¸‹è½½ã€‚ å‚è€ƒ https://toolwa.com/github/  ",
      "url"      : "http://localhost:4000/wiki/github/",
      "keywords" : "GitHub"
    } ,
  
    {
      "title"    : "Vim",
      "category" : "",
      "content": "ç§»åŠ¨ ä»¥å­—ï¼ˆç¬¦ï¼‰ä¸ºå•ä½    åŠŸèƒ½  æŒ‰é”®     ä¸Š  k    ä¸‹  j    å·¦  h    å³  l   ä»¥å•è¯ä¸ºå•ä½    åŠŸèƒ½  æŒ‰é”®     å‰ä¸€ä¸ªå•è¯å°¾  ge    åä¸€ä¸ªå•è¯é¦–  w    æœ¬å•è¯é¦–ï¼ˆå·²åœ¨æœ¬è¯é¦–åˆ™è·³åˆ°å‰ä¸€å•è¯é¦–ï¼‰  b    æœ¬å•è¯å°¾ï¼ˆå·²åœ¨æœ¬è¯å°¾åˆ™è·³åˆ°åä¸€å•è¯å°¾ï¼‰  e   ä»¥å±å¹•ä¸ºå•ä½    åŠŸèƒ½  æŒ‰é”®     å‘ä¸‹ç¿»é¡µ  CTRL-f    å‘ä¸Šç¿»é¡µ  CTRL-b    å‘ä¸‹ç¿»åŠé¡µ  CTRL-d    å‘ä¸Šç¿»åŠé¡µ  CTRL-u    å‘ä¸Šä¸€è¡Œ  CTRL-y    å‘ä¸‹ä¸€è¡Œ  CTRL-e    å…‰æ ‡ç§»åˆ°å±å¹•ä¸Šæ–¹  H    å…‰æ ‡ç§»åˆ°å±å¹•ä¸­é—´  M    å…‰æ ‡ç§»åˆ°å±å¹•ä¸‹æ–¹  L    å…‰æ ‡æ‰€åœ¨ä½ç½®ç§»åˆ°å±å¹•ä¸Šæ–¹  zt    å…‰æ ‡æ‰€åœ¨ä½ç½®ç§»åˆ°å±å¹•ä¸­é—´  zz    å…‰æ ‡æ‰€åœ¨ä½ç½®ç§»åˆ°å±å¹•ä¸‹æ–¹  zb   è¡Œå·    åŠŸèƒ½  æŒ‰é”®     è·³åˆ°ç¬¬ num è¡Œ  :num æˆ– numG æˆ– numgg   æ–‡ä»¶    åŠŸèƒ½  æŒ‰é”®     è·³åˆ°æ–‡ä»¶å¤´  gg    è·³åˆ°æ–‡ä»¶å°¾  G   ç¼–è¾‘ å¤åˆ¶    åŠŸèƒ½  æŒ‰é”®     å¤åˆ¶å…‰æ ‡æ‰€åœ¨å•è¯  yiw    å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ  yy   ç²˜è´´    åŠŸèƒ½  æŒ‰é”®     åœ¨å…‰æ ‡ä¹‹åç²˜è´´  p    åœ¨å…‰æ ‡ä¹‹å‰ç²˜è´´  P   å‰ªåˆ‡    åŠŸèƒ½  æŒ‰é”®     å‰ªåˆ‡é€‰ä¸­åŒºåŸŸ  d    å‰ªåˆ‡å…‰æ ‡æ‰€åœ¨è¡Œ  dd   æ›¿æ¢    åŠŸèƒ½  æŒ‰é”®     å°†å…¨æ–‡ä¸­çš„ str1 æ›¿æ¢ä¸º str2  :%s/str1/str2/g    å°† 1 åˆ° 5 è¡Œä¸­çš„ str1 æ›¿æ¢ä¸º str2  :1,5s/str1/str2/g   å¤§å°å†™    åŠŸèƒ½  æŒ‰é”®     å°†é€‰ä¸­å†…å®¹å¤§å°å†™äº’æ¢  ~    å°†é€‰ä¸­å†…å®¹å…¨è½¬ä¸ºå°å†™  gu    å°†é€‰ä¸­å†…å®¹å…¨è½¬ä¸ºå¤§å†™  gU    å°†å½“å‰è¡Œå˜æˆå°å†™  guu    å°†å½“å‰è¡Œå˜æˆå¤§å†™  gUU    å°†åŒ¹é…å†…å®¹æ›¿æ¢ä¸ºå¤§å†™  :%s/xxx/  U&amp;/g    å°†åŒ¹é…å†…å®¹æ›¿æ¢ä¸ºå°å†™  :%s/xxx/  L&amp;/g   æ³¨ï¼š&amp; ä»£è¡¨æ­£åˆ™è¡¨è¾¾å¼å…¨éƒ¨åŒ¹é…é¡¹ï¼Œå¦å¤–è¿˜æœ‰   1ã€â€™  2â€™ã€â€¦ã€  9 ä»£è¡¨ç¬¬ 1 åˆ° 9 ä¸ªåŒ¹é…é¡¹ã€‚ é€‰æ‹©    åŠŸèƒ½  æŒ‰é”®     é€‰ä¸­ä¸Šä¸€æ¬¡é€‰æ‹©çš„åŒºåŸŸ  gv    é€‰ä¸­æ‹¬å·å†…åŒºåŸŸ  vi{ã€vi[ã€vi(   æœç´¢    åŠŸèƒ½  æŒ‰é”®     å‘ä¸‹æŸ¥æ‰¾å­—ç¬¦ä¸²  /str    å‘ä¸ŠæŸ¥æ‰¾å­—ç¬¦ä¸²  ?str    æŸ¥æ‰¾ä¸‹ä¸€ä¸ª  n    æŸ¥æ‰¾ä¸Šä¸€ä¸ª  N    å‘ä¸‹æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å•è¯  *    å‘ä¸‹æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å•è¯  #   æ­£åˆ™è¡¨è¾¾å¼    åŠŸèƒ½  æŒ‰é”®     åŒ¹é…å•è¯å·¦è¾¹ç•Œ    &lt;    åŒ¹é…å•è¯å³è¾¹ç•Œ    &gt;    å»é‡  :g/^  (.*  )$    1/d   å¸¸ç”¨    åŠŸèƒ½  æŒ‰é”®     åˆ é™¤ç©ºè¡Œ  :g/^$/d    æ’¤é”€/UNDO  u    é‡åš/REDO  C-r    ç»Ÿè®¡è¡Œ/å•è¯/å­—ç¬¦/å­—èŠ‚æ•°  g C-g    å»æ‰ UTF-8 BOM  :set nobomb    ä¿ç•™ UTF-8 BOM  :set bomb   å…¨å±€    åŠŸèƒ½  æŒ‰é”®     é€€å‡º  :q    å¼ºåˆ¶æ‰§è¡Œ  !    æ‰§è¡Œå¤–éƒ¨å‘½ä»¤  :!   æ–‡ä»¶æ“ä½œ    åŠŸèƒ½  æŒ‰é”®     æ‰“å¼€  :e    æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†  :bro e    ä¿å­˜  :w    å¦å­˜ä¸ºå¯¹è¯æ¡†  :bro w    æŸ¥çœ‹å†å²æ–‡ä»¶åˆ—è¡¨  :ol    æŸ¥çœ‹å¹¶æ‰“å¼€å†å²æ–‡ä»¶  :bro ol    é‡å‘½åå½“å‰æ–‡ä»¶  :f filename   vimdiff    åŠŸèƒ½  æŒ‰é”®     ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªä¸åŒå¤„  [c    ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸åŒå¤„  ]c    è¯¥å·®å¼‚ç‚¹ä½¿ç”¨å½“å‰æ–‡ä»¶çš„  dp    è¯¥å·®å¼‚ç‚¹ä½¿ç”¨å…¶å®ƒæ–‡ä»¶çš„  do    æ‰‹åŠ¨åˆ·æ–°é‡æ–°æ¯”è¾ƒ  :diffupdate   Buffer    åŠŸèƒ½  æŒ‰é”®     æŸ¥çœ‹ Buffer åˆ—è¡¨  :ls    è½¬åˆ° Buffer åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ª Buffer  :bn    è½¬åˆ° Buffer åˆ—è¡¨ä¸­çš„ä¸Šä¸€ä¸ª Buffer  :bp    è½¬åˆ° Buffer åˆ—è¡¨ä¸­çš„ num å· Buffer  :bnum    ä½ ä¹‹å‰å¾…è¿‡çš„ä¸€ä¸ª Buffer  :b#    ä» Buffer åˆ—è¡¨ä¸­åˆ é™¤ num å· Buffer  :bdnum   ç»„åˆå‘½ä»¤ å¯ä»¥ä½¿ç”¨ | æ¥ç»„åˆå‘½ä»¤ï¼Œæ¯”å¦‚ cmd1 | cmd2ã€‚ ä»£ç     åŠŸèƒ½  æŒ‰é”®     æ ¼å¼åŒ–ä»£ç   gg=G    å»é™¤ 1-20 è¡Œé¦–çš„è¡Œå·  :1,20s/^    s  *[0-9]  *    s  *//g    å±•å¼€å…¨éƒ¨æŠ˜å   zR    å±•å¼€å½“å‰å±‚çº§æŠ˜å   zr    å…¨éƒ¨æŠ˜å   zM    å½“å‰å±‚çº§æŠ˜å   zm    åˆ‡æ¢æŠ˜å /å±•å¼€  za    é€’å½’æŠ˜å /å±•å¼€å½“å‰å¤§åŒºå—  zA    æŠ˜å å½“å‰åŒºå—  zc    é€’å½’æŠ˜å å½“å‰å¤§åŒºå—  zC    å±•å¼€å½“å‰åŒºå—  zo    é€’å½’å±•å¼€å½“å‰å¤§åŒºå—  zO    æ ¼å¼åŒ– json æ•°æ®  :%!python -m json.tool    ç¼©è¿›å½“å‰è¡Œ  &gt;&gt;    åç¼©è¿›å½“å‰è¡Œ  &lt;&lt;   modeline å†™æ³•ï¼š vim: set ft=markdown: vim: ft=markdown // vim: noai:ts=4:sw=4 /* vim: noai:ts=4:sw=4 */ æ’ä»¶ CtrlP åŸºç¡€æŒ‰é”® C-p    åŠŸèƒ½  æŒ‰é”®     åˆ·æ–°åˆ—è¡¨  F5    åˆ‡æ¢æ–‡ä»¶/ç¼“å†²åŒº/MRU  C-f/b    åˆ‡æ¢å…¨è·¯å¾„æœç´¢/æ–‡ä»¶åæœç´¢  C-d    åˆ‡æ¢æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼  C-r    ä¸Š/ä¸‹ä¸€ä¸ªé€‰é¡¹  C-k/j    åœ¨æ–°æ ‡ç­¾/å‚ç›´åˆ†å‰²/æ°´å¹³åˆ†å‰²æ‰“å¼€æ–‡ä»¶  C-t/v/x    å†å²é€‰æ‹©è®°å½•çš„ä¸Š/ä¸‹ä¸€æ¡  C-p/n    åˆ›å»ºæ–‡ä»¶å’Œå®ƒçš„çˆ¶è·¯å¾„  C-y    æ ‡è®°å¹¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶  C-z C-o    é€€å‡º CtrlP  C-c   LeaderF    åŠŸèƒ½  æŒ‰é”®     æ‰“å¼€æ–‡ä»¶  Leader-f    æ‰“å¼€ç¼“å†²åŒº  Leader-b    æ‰“å¼€ MRU  Leader-mï¼ˆè‡ªå®šä¹‰çš„ï¼‰    é€€å‡º  C-c    åˆ‡æ¢æ¨¡ç³ŠæŸ¥æ‰¾å’Œæ­£åˆ™æŸ¥æ‰¾  C-r    ç²˜è´´  C-v    æ¸…ç©ºè¾“å…¥  C-u    ä¸Š/ä¸‹ä¸€ä¸ªé€‰é¡¹  C-k/j    åœ¨æ–°æ ‡ç­¾/å‚ç›´åˆ†å‰²/æ°´å¹³åˆ†å‰²æ‰“å¼€æ–‡ä»¶  C-t/]/v    åˆ·æ–°åˆ—è¡¨  F5   vim-table-mode    åŠŸèƒ½  æŒ‰é”®     åˆ é™¤åˆ—  Leader-tdc    åˆ é™¤è¡Œ  Leader-tdd    é‡æ–°æ ¼å¼åŒ–è¡¨æ ¼  Leader-tr   markdown-preview.nvim    åŠŸèƒ½  æŒ‰é”®     é¢„è§ˆ  F5    åœæ­¢é¢„è§ˆ  F6   å¯¼å‡º PDFï¼šé¢„è§ˆä»¥åï¼Œä½¿ç”¨æµè§ˆå™¨çš„ã€Œæ‰“å°ã€åŠŸèƒ½ï¼Œæ‰“å°æœºé€‰ã€Œå¦å­˜ä¸º PDFã€ï¼Œå–æ¶ˆã€Œé¡µçœ‰å’Œé¡µè„šã€ï¼Œç„¶åç‚¹ä¿å­˜å³å¯ã€‚ å‘½ä»¤è¡Œ æ‰“å¼€ Vim æ—¶è·³è½¬åˆ°æŒ‡å®šè¡Œï¼š vim +[num] filename num è¡¨ç¤ºè¡Œå·ï¼Œä¸å¡«åˆ™è·³è½¬åˆ°æ–‡ä»¶æœ«å°¾ã€‚ ",
      "url"      : "http://localhost:4000/wiki/vim/",
      "keywords" : "Vim"
    } ,
  
    {
      "title"    : "MySQL è¡¨ç©ºé—´ç¢ç‰‡å›æ”¶",
      "category" : "",
      "content": "ä» MySQL è¡¨ä¸­å¤§é‡åˆ é™¤æ•°æ®åï¼Œæœ‰å¯èƒ½è¡¨å ç”¨çš„ç©ºé—´å¹¶ä¸ä¼šé©¬ä¸Šå›æ”¶æ‰ï¼Œæ­¤æ—¶å¦‚æœåœ¨æ„ç©ºé—´å ç”¨ï¼Œå¯ä»¥ä¸»åŠ¨è¿›è¡Œç©ºé—´ç¢ç‰‡å›æ”¶ã€‚ æŸ¥çœ‹è¡¨ç©ºé—´ç¢ç‰‡å ç”¨ æ–¹æ³•ä¸€ï¼š SELECT table_schema db,   table_name,   data_free,   engine FROM information_schema.tables  WHERE table_schema NOT IN ('information_schema', 'mysql')  AND data_free &gt; 0 and table_name = 'xxx' ORDER BY DATA_FREE DESC; æ–¹æ³•äºŒï¼š show table status like 'xxx'; data_free å­—æ®µå¯¹åº”çš„å€¼å°±æ˜¯ç¢ç‰‡å­—èŠ‚æ•°ã€‚ è¡¨ç©ºé—´ç¢ç‰‡å›æ”¶ -- é€‚ç”¨ InnoDB è¡¨ ALTER TABLE xxx engine = InnoDB æœ‰ä¸€ç¯‡ç›¸å…³çš„æ–‡ç« è®²å¾—æ¯”è¾ƒå¥½å¯ä»¥å‚è€ƒï¼šhttps://www.cnblogs.com/wanng/p/mysql-recycle-table-space.html ",
      "url"      : "http://localhost:4000/fragment/mysql-space-recover/",
      "keywords" : "MySQL"
    } ,
  
    {
      "title"    : "Fragment Template",
      "category" : "",
      "content": "Content here ",
      "url"      : "http://localhost:4000/fragment/template/",
      "keywords" : "keyword1, keyword2"
    } 
  
]

