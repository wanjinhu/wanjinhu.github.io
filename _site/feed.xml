<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-08-30T10:38:32+08:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Wanjin Hu (胡万金)</title><subtitle>There is only one heroism in the world: to see the world as it is and to love it. (世界上只有一种真正的英雄主义，那就是认清生活真相后依旧热爱生活。)</subtitle><author><name>Wanjin Hu (胡万金)</name></author><entry><title type="html">《人生十二法则》读后的个人思考</title><link href="http://localhost:4000/2023/08/30/reading-12rules-for-life/" rel="alternate" type="text/html" title="《人生十二法则》读后的个人思考" /><published>2023-08-30T00:00:00+08:00</published><updated>2023-08-30T00:00:00+08:00</updated><id>http://localhost:4000/2023/08/30/reading-12rules-for-life</id><content type="html" xml:base="http://localhost:4000/2023/08/30/reading-12rules-for-life/">&lt;p&gt;真的有12条法则可以来指导你过的人生么？我开始思考自己的人生。&lt;/p&gt;

&lt;p&gt;看到书名，你估计可能会想这本书就是一个特傻的鸡汤文，这都什么年代了还搞这一出？这个时代提倡的是个性，是包容，是多元，是自由，是独立，是开放，是博爱。真就掌握了你说的这12条法则就能过好我的人生么？用脚趾头想想都觉得不可能，你了解我是谁么？你知道我经历了什么？你知道我最近有多痛苦么？没人可以定义我的人生，我的人生只能我自己来定义。我有我自己的想法和选择，我和其他人并不一样。所以我压根就懒得听你扯这些大道理，该懂得道理我都懂，我只是做不到。&lt;/p&gt;

&lt;p&gt;以上这些想法多少在你的脑海中有过，再加上现在互联网的高度发达，各种社交媒体的包装，还有各种现实问题的困扰，你很难不陷入到这种思维中。平时生活工作总会带着面具，虚伪的对外界展示自己，到了深夜再进行人生思考，各种emo的情绪就会爆发，再影响第二天自己的生活，循环往复。说实话，没有人会不去思考自己的人生，人生存在的目的价值，但是正如上面提到的那些，执拗的去秉持自己的观点，而这些观点甚至不是自己思考获得的，而是各种形式主义灌输给我们的。这样的思考只会让人抑郁和空虚。&lt;/p&gt;

&lt;p&gt;人在年轻的时候，既缺乏独立也缺少认知，因为还没来得及积累阅历和智慧来建立起自己的个人标准，所以大多数情况下，只好和他人做比较。大体上，我想人生的成长过程中总会经历这个阶段。如果你不想和他人做比较，就得逐渐建立起自己的标准，有明确的世界观、人生观和价值观。否则一句“我只想做自己，不想和他人比较”之类的话，就是很可笑和没有份量的，可能只是自己逃避的借口。到底这种听起来很酷的自我宣言属于哪一种，恐怕只有自己内心深处明白。我希望不要自欺欺人，至少对自己做到真诚。向内求，不是欺骗自己的空话和逃避的借口，而是符合自我标准的真情实感，这也不是平白无故就可以想明白的，去读书/学习/总结，至少对现在的我来说是一个很好的向求内的路径。&lt;/p&gt;

&lt;p&gt;《人生十二法则》是乔丹•皮得森 (Jordan B. Peterson) 教授很早之前写的一本书。了解到皮得森教授是因为他之前的一个访谈类节目的片段（视频链接我会放在最后），他聊到的是一个人在面对撒谎和讲出事实的选择时，为什么要勇敢的讲真话。逃避或者说出真相，不仅仅是两个不同的选择，更是两条人生道路，两种完全不同的存在方式。我需要指出的是，这里讲出事实，不是让你不顾及任何后果的说出真相，而是要明白真相，并做出正确的选择。遇到争议不要害怕讲出自己的观点，依照事实原则，遵循内心的价值观，勇敢表明自己的观点，很有可能你会遭到批判和冷嘲热讽，但是没关系，你每一次的行为就是为塑造你个人价值观的一次巩固。这本书是我探索人生意义上的一本很重要的书，某些时候内心的那种澎湃感，由于自己匮乏的认知和语言能力很难表达出来，看到这本书的时候，我似乎找到了一种表达自己内心想法的途径，书里的某些观点与我的价值观不谋而合，让我觉得自己的价值观是正确的，同时我也可以用这些观点来指导自己，让自己变得更好。&lt;/p&gt;

&lt;p&gt;《人生十二法则》的写法很有趣，每条法则都用一个小故事作为引言，也很符合皮得森教授的风格，他本身也是大学的心理学教授(不知道现在还在不在职)，他从几年前就开始在网络上发自己的上课视频，他很擅长用古希腊的神话故事或者其他的故事来引导听众。同时他一直在用严肃认真的态度来对待每个抛给他的问题，我非常欣赏皮得森教授的这种做法，现在这个时代，大家鼓吹的是个性、幽默和个人魅力塑造，以及其他各种无意义和浮于表面的词语，而皮得森教授则用严肃的态度来引导大家思考人生，我觉得这是很有必要的。他的态度和行为都让人感觉很值得学习。&lt;/p&gt;

&lt;p&gt;下面是皮得森教授在书中总结的十二条人生法则：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;法则一 获胜的龙虾从不低头：笔直站立，昂首挺胸&lt;/li&gt;
  &lt;li&gt;法则二 像照顾生病的宠物一样关心自己：待己如助人&lt;/li&gt;
  &lt;li&gt;法则三 摆脱损友：与真心希望你好的人做朋友&lt;/li&gt;
  &lt;li&gt;法则四 战胜内心的批评家：和昨天的自己比，别和今天的别人比&lt;/li&gt;
  &lt;li&gt;法则五 管教你家的小怪物：别让孩子做出令你讨厌他的事&lt;/li&gt;
  &lt;li&gt;法则六 当痛苦到想诅咒一切：批判世界之前先清理你的房间&lt;/li&gt;
  &lt;li&gt;法则七 苏格拉底的选择：追求意义，拒绝苟且&lt;/li&gt;
  &lt;li&gt;法则八 不买醉鬼卖的东西：说真话，或者至少别撒谎&lt;/li&gt;
  &lt;li&gt;法则九 别偷走来访者的问题：假设你聆听的人知道你不知道的事&lt;/li&gt;
  &lt;li&gt;法则十 不要无视地毯下的龙：直面问题，言辞精确&lt;/li&gt;
  &lt;li&gt;法则十一 不要打扰玩滑板的孩子们：承认现实，反对偏见&lt;/li&gt;
  &lt;li&gt;法则十二 当你在街上遇到一只猫时，摸摸它：关注存在的善&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;批判世界之前先清理你的房间。我觉得这是整本书的基调，在你没有负起对自己人生的责任时，不要过多关注世界的纷扰，而是先整理好自己，让自己变得更有责任感。是的，责任感。现在大家好像在个人生活中不怎么提到这个词了，因为它有点沉重和落于时代，但我觉得还是很重要。就像书中写的，你要成为你父亲葬礼上最值得依靠的人，为你的家人负起责任来。当然有些事情只有经历过之后才会知道，特别是过生活，你想的特别美好的时候，更多是纸上谈兵，我想表明的是这当然不假，这和12条法则并不冲突，甚至这12条法则可以作为你生活工作的指导思想之一。但是你需要提前知道这些信息，提前在你的内心和脑海中种下一颗坚韧的种子，然后把每一次的经历都作为其成长的肥料。罗曼罗兰说过一句话，“生活中只有一种正真的英雄主义，就是认清生活的真相之后依然热爱它”。所以请不要害怕生活中遇到的挫折、困难，明确你自己的人生指导法则，这12条法则只是皮得森教授自己作为临床心理学家的总结，我们可以作为参考，还是需要记录适合自己的人生法则。但是，对我自己来说，责任、坚韧、诚实和追求意义这些存在了很久的人生品质，毫无疑问会作为我人生法则之书的坚实基础。&lt;/p&gt;

&lt;p&gt;我还特别想要指出一点的是，这12条法则多数是要求你从自身做起，和昨天的自己比，别和今天的别人比。和别人比较是造成你生活痛苦的重要原因之一，因为这样有了期待、有了嫉妒，你大脑中的多巴胺欲望回路被持续刺激，只想要更多，这样在原本就是痛苦的人生基础上更加的痛苦。还有，这些法则永远要通过你自身的理解，融入到你的生活工作中，用来指导你的人生，千万不要作为你卖弄的资本，想要强加在别人身上，遇到生活过的艰难的人，多给他们报有一点善意吧，不要说那些过得不好是自身不努力的屁话，你的这些诅咒最终都会被你自己反噬。这个世界包含的比你关注的多太多了，你必须认真分配有限的资源。&lt;/p&gt;

&lt;p&gt;苏格拉底的选择：追求意义，拒绝苟且。&lt;/p&gt;

&lt;p&gt;我的选择：承担责任，追求价值，寻找意义。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;相关链接&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/@JordanBPeterson&quot;&gt;乔丹•皮得森教授的YouTube主页&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/34870933/&quot;&gt;豆瓣：人生十二法则&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/zvideo/1543581948072660992&quot;&gt;乔丹•皮得森教授分享片段：要敢于表达自我并证明自己&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Wanjin Hu (胡万金)</name></author><category term="Life" /><summary type="html">真的有12条法则可以来指导你过的人生么？我开始思考自己的人生。</summary></entry><entry><title type="html">宏基因组分析流程</title><link href="http://localhost:4000/2023/08/10/pipeline-metagenomic-analysis/" rel="alternate" type="text/html" title="宏基因组分析流程" /><published>2023-08-10T00:00:00+08:00</published><updated>2023-08-10T00:00:00+08:00</updated><id>http://localhost:4000/2023/08/10/pipeline-metagenomic-analysis</id><content type="html" xml:base="http://localhost:4000/2023/08/10/pipeline-metagenomic-analysis/">&lt;p&gt;提供一个宏基因组分析流程。&lt;/p&gt;

&lt;p&gt;Here is a metagenomic sequence data analysis pipeline, nothing different with other pipelines. But if you want to get to know the metagenomic analysis pipeline step by step, maybe you can get some details from this repository. And it is suitable for the beginners i think.&lt;/p&gt;

&lt;p&gt;Scripts and test files you can find here: &lt;a href=&quot;https://github.com/wanjinhu/Metagenomic-Analysis-Pipeline&quot;&gt;Metagenomic-Analysis-Pipeline&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;pipeline-overview-&quot;&gt;Pipeline overview 🐫&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Raw sequence quality trim&lt;/li&gt;
  &lt;li&gt;Host reference sequence remove&lt;/li&gt;
  &lt;li&gt;Metaphlan for composition of microbial communities&lt;/li&gt;
  &lt;li&gt;Sequence assembly&lt;/li&gt;
  &lt;li&gt;Gene prediction&lt;/li&gt;
  &lt;li&gt;Remove redundancy gene and build non-redundant geneset&lt;/li&gt;
  &lt;li&gt;Function annotation using emapper&lt;/li&gt;
  &lt;li&gt;Organize function results table&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;quick-start-&quot;&gt;Quick start 🦏&lt;/h2&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$python&lt;/span&gt; pipe_metagenome.py &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;
usage: 
&lt;span class=&quot;o&quot;&gt;=================================================================&lt;/span&gt;
python pipe_metagenome.py
	&lt;span class=&quot;nt&quot;&gt;--fastq_list&lt;/span&gt; fq.list
	&lt;span class=&quot;nt&quot;&gt;--output_dir&lt;/span&gt; result
	&lt;span class=&quot;nt&quot;&gt;--ref&lt;/span&gt; ref_bowtie2_index
ref_bowtie2_index:
canis: /root/database/Canis_GCF_000002285.5/Canis_GCF_000002285_5
human: /root/database/hg38_GCF_000001405.40/GCF_000001405.40/hg38
&lt;span class=&quot;o&quot;&gt;=================================================================&lt;/span&gt;

Pipeline of metagenome

optional arguments:
  &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;, &lt;span class=&quot;nt&quot;&gt;--help&lt;/span&gt;            show this &lt;span class=&quot;nb&quot;&gt;help &lt;/span&gt;message and &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; FQLIST, &lt;span class=&quot;nt&quot;&gt;--fastq_list&lt;/span&gt; FQLIST
                        raw fq list
  &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; OUTDIR, &lt;span class=&quot;nt&quot;&gt;--output_dir&lt;/span&gt; OUTDIR
                        result output
  &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; REF, &lt;span class=&quot;nt&quot;&gt;--ref&lt;/span&gt; REF     ref genome bowtie2 index
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What you need to do is to provide two input files:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;–fastq_list # sample - fq_R1 - fq_R2 list, format like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fq.list&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;–ref # host reference genome bowtie2 index&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And set output dir &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--output_dir&lt;/code&gt;, all of output results would be included.&lt;/p&gt;

&lt;h2 id=&quot;output-files-explanation-&quot;&gt;Output files explanation 🐊&lt;/h2&gt;
&lt;h3 id=&quot;output-files-tree-not-show-all-files&quot;&gt;Output files tree (not show all files)&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── 00-result                           &lt;span class=&quot;c&quot;&gt;# most important results in this fold&lt;/span&gt;
│   ├── 00_merged_abundance_table.txt   &lt;span class=&quot;c&quot;&gt;# composition of microbial communities&lt;/span&gt;
│   ├── 01_metaphlan_phylum.txt         &lt;span class=&quot;c&quot;&gt;# communities in phylum level&lt;/span&gt;
│   ├── 02_metaphlan_class.txt          &lt;span class=&quot;c&quot;&gt;# communities in class level&lt;/span&gt;
│   ├── 03_metaphlan_order.txt          &lt;span class=&quot;c&quot;&gt;# communities in order level&lt;/span&gt;
│   ├── 04_metaphlan_family.txt         &lt;span class=&quot;c&quot;&gt;# communities in family level&lt;/span&gt;
│   ├── 05_metaphlan_genus.txt          &lt;span class=&quot;c&quot;&gt;# communities in genus level&lt;/span&gt;
│   ├── 06_metaphlan_species.txt        &lt;span class=&quot;c&quot;&gt;# communities in species level&lt;/span&gt;
│   ├── KO_samples.xls                  &lt;span class=&quot;c&quot;&gt;# KEGG KO gene composition table&lt;/span&gt;
│   └── pathway_samples.xls             &lt;span class=&quot;c&quot;&gt;# KEGG pathway composition table&lt;/span&gt;
├── 01-fastp_trim
├── 02-ref_remove
├── 03-metaphlan
├── 04-megahit
├── 05-prodigal
├── 06-cdhit
├── 07-emapper
├── 08-sam_count
├── 09-emapper_kegg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;output-important-result-files-explanation&quot;&gt;Output important result files explanation&lt;/h3&gt;
&lt;h4 id=&quot;metaphlan_diff-levelstxt&quot;&gt;metaphlan_diff-levels.txt&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;column 1 : communities information&lt;/li&gt;
  &lt;li&gt;column 2 ~ : communities abundance percent of samples
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;clade_name	C1
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Firmicutes	86.51132
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Actinobacteria	6.52203
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Bacteroidetes	4.24729
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Proteobacteria	1.96422
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Fusobacteria	0.75514
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Tenericutes	0.0
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Spirochaetes	0.0
k__Bacteria&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;p__Verrucomicrobia	0.0
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;h4 id=&quot;ko_samplesxls&quot;&gt;KO_samples.xls&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;column 1 : KO gene name&lt;/li&gt;
  &lt;li&gt;column 2 : KO gene description&lt;/li&gt;
  &lt;li&gt;column 3 : KO gene id&lt;/li&gt;
  &lt;li&gt;column 4 ~ : KO gene number of samples
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;KO_name	KO_des	KO	C1
&lt;span class=&quot;s2&quot;&gt;&quot;E1.1.1.1, adh&quot;&lt;/span&gt;	alcohol dehydrogenase &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;EC:1.1.1.1]	K00001	2817.0
&lt;span class=&quot;s2&quot;&gt;&quot;AKR1A1, adh&quot;&lt;/span&gt;	alcohol dehydrogenase &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;NADP+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;EC:1.1.1.2]	K00002	254.0
hom	homoserine dehydrogenase &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;EC:1.1.1.3]	K00003	2890.0
&lt;span class=&quot;s2&quot;&gt;&quot;BDH, butB&quot;&lt;/span&gt;	&lt;span class=&quot;s2&quot;&gt;&quot;(R,R)-butanediol dehydrogenase / meso-butanediol dehydrogenase / diacetyl reductase [EC:1.1.1.4 1.1.1.- 1.1.1.303]&quot;&lt;/span&gt;	K00004	20.0
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;h4 id=&quot;pathway_samplesxls&quot;&gt;pathway_samples.xls&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;column 1 : pathway level 1&lt;/li&gt;
  &lt;li&gt;column 2 : pathway level 2&lt;/li&gt;
  &lt;li&gt;column 3 : pathway level 3&lt;/li&gt;
  &lt;li&gt;column 4 : pathway id&lt;/li&gt;
  &lt;li&gt;column 5 ~ : pathway gene number of samples
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;level1	level2	level3	pathway	C1
Metabolism	Carbohydrate metabolism	Glycolysis / Gluconeogenesis	ko00010	91005.0
Metabolism	Carbohydrate metabolism	Citrate cycle &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;TCA cycle&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;	ko00020	31442.0
Metabolism	Carbohydrate metabolism	Pentose phosphate pathway	ko00030	53905.0
Metabolism	Carbohydrate metabolism	Pentose and glucuronate interconversions	ko00040	21334.0
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;step-by-step-&quot;&gt;Step by step 🦥&lt;/h2&gt;
&lt;h3 id=&quot;step1-raw-sequence-quality-trim-using-fastp&quot;&gt;Step1 Raw sequence quality trim using fastp&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fastp &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; sample_1.fastq.gz &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; sample_clean.1.fastq.gz &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; sample_2.fastq.gz &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; sample_clean.2.fastq.gz &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; 8 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; sample.html &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; sample.json
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step2-host-reference-sequence-remove&quot;&gt;Step2 Host reference sequence remove&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bowtie2 &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; ref_bowtie2_index &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; sample_clean.1.fastq.gz &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt; sample_clean.2.fastq.gz &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; sample.sam  2&amp;gt;sample.mapping.log
samtools fastq -@ 8 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; 4 sample.sam &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; sample.unmap.1.fastq.gz &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt; sample.unmap.2.fastq.gz &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; sample.unmap.single.fastq.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step3-metaphlan-for-composition-of-microbial-communities&quot;&gt;Step3 Metaphlan for composition of microbial communities&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zcat sample.unmap.1.fastq.gz sample.unmap.2.fastq.gz|metaphlan &lt;span class=&quot;nt&quot;&gt;--input_type&lt;/span&gt; fastq &lt;span class=&quot;nt&quot;&gt;--bowtie2out&lt;/span&gt; sample_bowtie2.bz2 &lt;span class=&quot;nt&quot;&gt;--output_file&lt;/span&gt; sample_metaphlan.tsv &lt;span class=&quot;nt&quot;&gt;--nproc&lt;/span&gt; 8
&lt;span class=&quot;c&quot;&gt;# when you install metaphlan in the system, you will get script &apos;merge_metaphlan_tables.py&apos;, that&apos;s for merge different samples metaphlan result in one file, like: &lt;/span&gt;
merge_metaphlan_tables.py &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.tsv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 00_merged_abundance_table.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;(p__)|(clade_name)&apos;&lt;/span&gt; 00_merged_abundance_table.txt |grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;c__&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/|/;/g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 01_metaphlan_phylum.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;(c__)|(clade_name)&apos;&lt;/span&gt; 00_merged_abundance_table.txt |grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;o__&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/|/;/g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 02_metaphlan_class.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;(o__)|(clade_name)&apos;&lt;/span&gt; 00_merged_abundance_table.txt |grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;f__&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/|/;/g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 03_metaphlan_order.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;(f__)|(clade_name)&apos;&lt;/span&gt; 00_merged_abundance_table.txt |grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;g__&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/|/;/g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 04_metaphlan_family.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;(g__)|(clade_name)&apos;&lt;/span&gt; 00_merged_abundance_table.txt |grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;s__&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/|/;/g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 05_metaphlan_genus.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;(s__)|(clade_name)&apos;&lt;/span&gt; 00_merged_abundance_table.txt |grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;t__&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/|/;/g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 06_metaphlan_species.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step4-sequence-assembly-and-trim-contigs-which-length--500bp&quot;&gt;Step4 Sequence assembly and trim contigs which length &amp;lt; 500bp&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;megahit &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; sample.unmap.1.fastq.gz &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt; sample.unmap.2.fastq.gz &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; sample_megahit &lt;span class=&quot;nt&quot;&gt;--out-prefix&lt;/span&gt; sample &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 8
seqkit &lt;span class=&quot;nb&quot;&gt;seq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 500 sample_megahit/sample.contigs.fa &lt;span class=&quot;nt&quot;&gt;--remove-gaps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; sample.contigs_500.fa
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;s/&amp;gt;/&amp;gt;sample_/g&apos;&lt;/span&gt; sample.contigs_500.fa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step5-gene-prediction-using-prodigal&quot;&gt;Step5 Gene prediction using prodigal&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;prodigal &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; meta &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; sample_prot.faa &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; sample_nucl.fna &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; sample_genes.gff &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; gff &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; sample.stat &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; sample.contigs_500.fa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step6-remove-redundancy-gene-and-build-non-redundant-geneset&quot;&gt;Step6 Remove redundancy gene and build non-redundant geneset&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;sample1_prot.faa sample2_prot.faa ... &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;  prot.faa
&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;sample1_nucl.fna sample2_nucl.fna ... &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;  nucl.fna
cd-hit &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; prot.faa &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; prot_nonerude.faa &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 0.95 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; 8 &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 5 &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;-aS&lt;/span&gt; 0.9 &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-sc&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-sf&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-M&lt;/span&gt; 0
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&amp;gt;&apos;&lt;/span&gt; prot_nonerude.faa|awk &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos; &apos;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;{print $1}&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/&amp;gt;//g&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; prot_nonerude.list
seqtk subseq nucl.fna prot_nonerude.list &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; nucl_nonerude.fna
bwa index nucl_nonerude.fna &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; geneset_bwa
bioawk &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; fastx &lt;span class=&quot;s1&quot;&gt;&apos;{print $name, length($seq)}&apos;&lt;/span&gt; nucl_nonerude.fna &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; geneset_length.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step7-function-annotation-using-emapper&quot;&gt;Step7 Function annotation using emapper&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# when you install emapper in the system, you will get script &apos;emapper.py&apos;&lt;/span&gt;
emapper.py &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; prot_nonerude.faa &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; eggnog &lt;span class=&quot;nt&quot;&gt;--cpu&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;--usemem&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f1&lt;/span&gt;,12 eggnog.emapper.annotations|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;^#&quot;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;s/ko://g&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;1i gene\tko&apos;&lt;/span&gt;|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; KEGG_KO.txt
&lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f1&lt;/span&gt;,13 eggnog.emapper.annotations|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;^#&quot;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;1i gene\tpathway&apos;&lt;/span&gt;|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; KEGG_PATHWAY.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step8-gene-num-count&quot;&gt;Step8 Gene num count&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bwa mem &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 4 geneset_bwa sample.unmap.1.fastq.gz sample.unmap.2.fastq.gz | samtools view &lt;span class=&quot;nt&quot;&gt;-bS&lt;/span&gt; - | samtools &lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; - &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; sample_mapping_geneset.bam
samtools view &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt; 4 &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt; 256 &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt; 2048 sample_mapping_geneset.bam|awk &lt;span class=&quot;s1&quot;&gt;&apos;{if($3!=&quot;*&quot;) print $3}&apos;&lt;/span&gt;|sort| &lt;span class=&quot;nb&quot;&gt;uniq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;|awk &lt;span class=&quot;s1&quot;&gt;&apos;BEGIN {FS=&quot; &quot;;OFS=&quot;,&quot;} {print $2,$1}&apos;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;BEGIN {FS=&quot;,&quot;;OFS=&quot;,&quot;} {if ($2 &amp;gt; 1) print $1&quot;\t&quot;$2; else print $1&quot;\t0&quot;}&apos;&lt;/span&gt;|sed &lt;span class=&quot;s1&quot;&gt;&apos;1i gene\tsample&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; sample.count
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step9-organize-function-results-table&quot;&gt;Step9 Organize function results table&lt;/h3&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# using /kegg/kegg.py to analysis, like:&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$python&lt;/span&gt; kegg.py &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;
usage: python kegg.py &lt;span class=&quot;nt&quot;&gt;-kk&lt;/span&gt; KEGG_KO.txt &lt;span class=&quot;nt&quot;&gt;-kp&lt;/span&gt; KEGG_PATHWAY.txt &lt;span class=&quot;nt&quot;&gt;-mt&lt;/span&gt; merged_file.txt &lt;span class=&quot;nt&quot;&gt;-ok&lt;/span&gt; out_KO.xls &lt;span class=&quot;nt&quot;&gt;-op&lt;/span&gt; out_pathway.xls

Merge KO/pathway count table from eggnog result.

optional arguments:
  &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;, &lt;span class=&quot;nt&quot;&gt;--help&lt;/span&gt;            show this &lt;span class=&quot;nb&quot;&gt;help &lt;/span&gt;message and &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-kk&lt;/span&gt; KEGGKO, &lt;span class=&quot;nt&quot;&gt;--kegg_KO&lt;/span&gt; KEGGKO
                        Sample&lt;span class=&quot;s1&quot;&gt;&apos;s kegg KO information, such as KEGG_KO.txt
  -kp KEGGPATHWAY, --kegg_pathway KEGGPATHWAY
                        Sample&apos;&lt;/span&gt;s kegg pathway information, such as
                        KEGG_PATHWAY.txt
  &lt;span class=&quot;nt&quot;&gt;-mt&lt;/span&gt; MERGETABLE, &lt;span class=&quot;nt&quot;&gt;--merge_table&lt;/span&gt; MERGETABLE
                        Sample&lt;span class=&quot;s1&quot;&gt;&apos;s merged gene count table, such as
                        merged_file.txt
  -ok OUTKO, --out_KO OUTKO
                        Output KO result, such as out_KO.xls
  -op OUTPATHWAY, --out_pathway OUTPATHWAY
                        Output pathway result, such as out_pathway.xls
  -t TMP, --tmp TMP     Tmp files dir
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;contact-&quot;&gt;Contact 🐖&lt;/h2&gt;
&lt;p&gt;Wanjin Hu (wanjin.hu@outlook.com)&lt;/p&gt;</content><author><name>Wanjin Hu (胡万金)</name></author><category term="Metagenomic" /><summary type="html">提供一个宏基因组分析流程。</summary></entry></feed>